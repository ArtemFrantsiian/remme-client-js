var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).RemmeWebSocket=e()}}(function(){return function n(i,c,a){function u(t,e){if(!c[t]){if(!i[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var s=c[t]={exports:{}};i[t][0].call(s.exports,function(e){return u(i[t][1][e]||e)},s,s.exports,n,i,c,a)}return c[t].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,o){var r=function(){return this}(),s=r.WebSocket||r.MozWebSocket,n=e("./version");function i(e,t){return t?new s(e,t):new s(e)}s&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(i,e,{get:function(){return s[e]}})}),t.exports={w3cwebsocket:s?i:null,version:n}},{"./version":2}],2:[function(e,t,o){t.exports=e("../package.json").version},{"../package.json":3}],3:[function(e,t,o){t.exports={_args:[["websocket@1.0.26","/var/www/remme-client-js/packages/remme-base-transaction-response"]],_from:"websocket@1.0.26",_id:"websocket@1.0.26",_inBundle:!1,_integrity:"sha512-fjcrYDPIQxpTnqFQ9JjxUQcdvR89MFAOjPBlF+vjOt49w/XW4fJknUoMz/mDIn2eK1AdslVojcaOxOqyZZV8rw==",_location:"/websocket",_phantomChildren:{ms:"2.0.0"},_requested:{type:"version",registry:!0,raw:"websocket@1.0.26",name:"websocket",escapedName:"websocket",rawSpec:"1.0.26",saveSpec:null,fetchSpec:"1.0.26"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.26.tgz",_spec:"1.0.26",_where:"/var/www/remme-client-js/packages/remme-base-transaction-response",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"IÃ±aki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.26"}},{}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s,r=e("websocket"),n=e("./models");o.Statuses=n.Statuses,s="undefined"!=typeof window&&"undefined"!==window.WebSocket?window.WebSocket:r.w3cwebsocket;var i=function(){function e(e,t){this.isEvent=!1,this.socketAddress=e,this.sslMode=t}return e.prototype.connectToWebSocket=function(o){var r=this;this._socket&&this.closeWebSocket(),this._socket=new s(this._getSubscribeUrl()),this._socket.onopen=function(){r._socket.send(r._getSocketQuery())},this._socket.onmessage=function(e){var t=JSON.parse(e.data);if("message"===t.type&&0!==Object.getOwnPropertyNames(t.data).length){if(t.data.batch_statuses&&t.data.batch_statuses.invalid_transactions&&t.data.batch_statuses.invalid_transactions.length)return void r._sendAnError(new n.ErrorMessage(t.data.batch_statuses.invalid_transactions[0]),o);o(null,r.isEvent?t.data:new n.BatchStatusesDto(t.data.batch_statuses))}else if("error"===t.type)return void r._sendAnError(new n.ErrorFromEvent(t.data),o)},this._socket.onerror=function(e){o(e)}},e.prototype.closeWebSocket=function(){if(!this._socket)throw new Error("WebSocket is not running");1===this._socket.readyState&&this._socket.send(this._getSocketQuery(!1)),this._socket.close(),this._socket=null},e.prototype._sendAnError=function(e,t){this.closeWebSocket(),t(e)},e.prototype._getSubscribeUrl=function(){return""+(this.sslMode?"wss://":"ws://")+this.socketAddress+"/ws"+(this.isEvent?"/events":"")},e.prototype._getSocketQuery=function(e){void 0===e&&(e=!0);var t=this.isEvent?{action:e?"subscribe":"unsubscribe",data:this.data}:{type:"request",action:e?"subscribe":"unsubscribe",entity:"batch_state",id:Math.floor(1e3*Math.random()),parameters:this.data};return JSON.stringify(t)},e}();o.RemmeWebSocket=i},{"./models":8,websocket:1}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r,s,n=function(e){this.status=r[e.status],this.batchId=e.batch_id};o.BatchStatusesDto=n,(s=r=o.Statuses||(o.Statuses={})).INVALID="INVALID",s.PENDING="PENDING",s.COMMITTED="COMMITTED"},{}],6:[function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(o){function e(e){var t=o.call(this,e.info)||this;return t.status=r.StatusEvent[e.status],t}return n(e,o),e}(Error);r.ErrorFromEvent=o,r.StatusEvent={10:"SUBSCRIBED",11:"UNSUBSCRIBED",100:"MALFORMED_JSON",101:"MISSING_ACTION",102:"INVALID_ACTION",103:"MISSING_ID",104:"MISSING_PARAMETERS",105:"INVALID_PARAMS",106:"INVALID_ENTITY",107:"MISSING_ENTITY",108:"MESSAGE_ID_EXISTS",109:"MISSING_TYPE",110:"NO_VALIDATOR",111:"MISSING_DATA",112:"WRONG_EVENT_TYPE",113:"ALREADY_SUBSCRIBED",114:"EVENTS_NOT_PROVIDED",200:"BATCH_RESPONSE"}},{}],7:[function(e,t,o){"use strict";var r,s=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var n=function(o){function e(e){var t=o.call(this,e.message)||this;return t.extendedData=e.extended_data,t.transactionId=e.transaction_id,t}return s(e,o),e}(Error);o.ErrorMessage=n},{}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BatchStateUpdateDto");o.BatchStatusesDto=r.BatchStatusesDto,o.Statuses=r.Statuses;var s=e("./ErrorMessage");o.ErrorMessage=s.ErrorMessage;var n=e("./ErrorFromEvent");o.ErrorFromEvent=n.ErrorFromEvent},{"./BatchStateUpdateDto":5,"./ErrorFromEvent":6,"./ErrorMessage":7}]},{},[4])(4)});
//# sourceMappingURL=remme-web-socket.min.js.map
