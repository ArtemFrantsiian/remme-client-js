{"version":3,"sources":["node_modules/browser-pack/_prelude.js","packages/remme-web-socket/node_modules/websocket/lib/browser.js","bundle.js","packages/remme-web-socket/node_modules/websocket/lib/version.js","packages/remme-web-socket/node_modules/websocket/package.json","packages/remme-web-socket/src/index.ts","packages/remme-web-socket/src/models/BatchStateUpdateDto.ts","packages/remme-web-socket/src/models/ErrorFromEvent.ts","packages/remme-web-socket/src/models/ErrorMessage.ts","packages/remme-web-socket/src/models/index.ts"],"names":["f","exports","_typeof","module","define","amd","window","global","self","this","RemmeWebSocket","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","_global","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","W3CWebSocket","uri","protocols","forEach","prop","Object","defineProperty","get","w3cwebsocket","version","./version","2","../package.json","3","_args","_from","_id","_inBundle","_integrity","_location","_phantomChildren","ms","_requested","type","registry","raw","name","escapedName","rawSpec","saveSpec","fetchSpec","_requiredBy","_resolved","_spec","_where","author","email","url","browser","bugs","config","verbose","contributors","dependencies","debug","nan","typedarray-to-buffer","yaeti","description","devDependencies","buffer-equal","faucet","gulp","gulp-jshint","jshint","jshint-stylish","tape","directories","lib","engines","node","homepage","keywords","license","main","repository","scripts","install","test","4","value","WS","websocket_1","models_1","Statuses","socketAddress","sslMode","isEvent","prototype","connectToWebSocket","callback","_this","_socket","closeWebSocket","_getSubscribeUrl","onopen","send","_getSocketQuery","onmessage","response","JSON","parse","data","getOwnPropertyNames","batch_statuses","invalid_transactions","_sendAnError","ErrorMessage","BatchStatusesDto","ErrorFromEvent","onerror","err","readyState","close","error","subscribe","query","action","entity","id","Math","floor","random","parameters","stringify","./models","websocket","5","status","batchId","batch_id","6","extendStatics","__extends","setPrototypeOf","__proto__","Array","d","b","hasOwnProperty","__","constructor","create","_super","info","StatusEvent","10","11","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","200","7","message","extendedData","extended_data","transactionId","transaction_id","8","BatchStateUpdateDto_1","ErrorMessage_1","ErrorFromEvent_1","./BatchStateUpdateDto","./ErrorFromEvent","./ErrorMessage"],"mappings":"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","file":"remme-web-socket.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","var _global = (function() { return this; })();\nvar NativeWebSocket = _global.WebSocket || _global.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.RemmeWebSocket = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nvar _global = (function() { return this; })();\nvar NativeWebSocket = _global.WebSocket || _global.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n\n},{\"./version\":2}],2:[function(require,module,exports){\nmodule.exports = require('../package.json').version;\n\n},{\"../package.json\":3}],3:[function(require,module,exports){\nmodule.exports={\n  \"_args\": [\n    [\n      \"websocket@1.0.26\",\n      \"/var/www/remme-client-js/packages/remme-base-transaction-response\"\n    ]\n  ],\n  \"_from\": \"websocket@1.0.26\",\n  \"_id\": \"websocket@1.0.26\",\n  \"_inBundle\": false,\n  \"_integrity\": \"sha512-fjcrYDPIQxpTnqFQ9JjxUQcdvR89MFAOjPBlF+vjOt49w/XW4fJknUoMz/mDIn2eK1AdslVojcaOxOqyZZV8rw==\",\n  \"_location\": \"/websocket\",\n  \"_phantomChildren\": {\n    \"ms\": \"2.0.0\"\n  },\n  \"_requested\": {\n    \"type\": \"version\",\n    \"registry\": true,\n    \"raw\": \"websocket@1.0.26\",\n    \"name\": \"websocket\",\n    \"escapedName\": \"websocket\",\n    \"rawSpec\": \"1.0.26\",\n    \"saveSpec\": null,\n    \"fetchSpec\": \"1.0.26\"\n  },\n  \"_requiredBy\": [\n    \"/\"\n  ],\n  \"_resolved\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.26.tgz\",\n  \"_spec\": \"1.0.26\",\n  \"_where\": \"/var/www/remme-client-js/packages/remme-base-transaction-response\",\n  \"author\": {\n    \"name\": \"Brian McKelvey\",\n    \"email\": \"brian@worlize.com\",\n    \"url\": \"https://www.worlize.com/\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"bugs\": {\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node/issues\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"contributors\": [\n    {\n      \"name\": \"Iñaki Baz Castillo\",\n      \"email\": \"ibc@aliax.net\",\n      \"url\": \"http://dev.sipdoc.net\"\n    }\n  ],\n  \"dependencies\": {\n    \"debug\": \"^2.2.0\",\n    \"nan\": \"^2.3.3\",\n    \"typedarray-to-buffer\": \"^3.1.2\",\n    \"yaeti\": \"^0.0.6\"\n  },\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"devDependencies\": {\n    \"buffer-equal\": \"^1.0.0\",\n    \"faucet\": \"^0.0.1\",\n    \"gulp\": \"git+https://github.com/gulpjs/gulp.git#4.0\",\n    \"gulp-jshint\": \"^2.0.4\",\n    \"jshint\": \"^2.0.0\",\n    \"jshint-stylish\": \"^2.2.1\",\n    \"tape\": \"^4.0.1\"\n  },\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"engines\": {\n    \"node\": \">=0.10.0\"\n  },\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"license\": \"Apache-2.0\",\n  \"main\": \"index\",\n  \"name\": \"websocket\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"scripts\": {\n    \"gulp\": \"gulp\",\n    \"install\": \"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\n    \"test\": \"faucet test/unit\"\n  },\n  \"version\": \"1.0.26\"\n}\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar websocket_1 = require(\"websocket\");\nvar models_1 = require(\"./models\");\nexports.Statuses = models_1.Statuses;\n/**\n * @hidden\n */\nvar WS;\nif (typeof window !== \"undefined\" && window.WebSocket !== \"undefined\") {\n    WS = window.WebSocket;\n}\nelse {\n    WS = websocket_1.w3cwebsocket;\n}\nvar RemmeWebSocket = /** @class */ (function () {\n    function RemmeWebSocket(socketAddress, sslMode) {\n        this.isEvent = false;\n        this.socketAddress = socketAddress;\n        this.sslMode = sslMode;\n    }\n    RemmeWebSocket.prototype.connectToWebSocket = function (callback) {\n        var _this = this;\n        if (this._socket) {\n            this.closeWebSocket();\n        }\n        this._socket = new WS(this._getSubscribeUrl());\n        this._socket.onopen = function () {\n            _this._socket.send(_this._getSocketQuery());\n        };\n        this._socket.onmessage = function (e) {\n            // console.log(e.data);\n            var response = JSON.parse(e.data);\n            if (response.type === \"message\"\n                &&\n                    Object.getOwnPropertyNames(response.data).length !== 0) {\n                if (response.data.batch_statuses &&\n                    response.data.batch_statuses.invalid_transactions &&\n                    response.data.batch_statuses.invalid_transactions.length) {\n                    _this._sendAnError(new models_1.ErrorMessage(response.data.batch_statuses.invalid_transactions[0]), callback);\n                    return;\n                }\n                callback(null, _this.isEvent ? response.data : new models_1.BatchStatusesDto(response.data.batch_statuses));\n            }\n            else if (response.type === \"error\") {\n                _this._sendAnError(new models_1.ErrorFromEvent(response.data), callback);\n                return;\n            }\n        };\n        this._socket.onerror = function (err) {\n            callback(err);\n            return;\n        };\n    };\n    RemmeWebSocket.prototype.closeWebSocket = function () {\n        if (!this._socket) {\n            throw new Error(\"WebSocket is not running\");\n        }\n        if (this._socket.readyState === 1) {\n            this._socket.send(this._getSocketQuery(false));\n        }\n        this._socket.close();\n        this._socket = null;\n    };\n    RemmeWebSocket.prototype._sendAnError = function (error, callback) {\n        this.closeWebSocket();\n        callback(error);\n    };\n    RemmeWebSocket.prototype._getSubscribeUrl = function () {\n        var protocol = this.sslMode ? \"wss://\" : \"ws://\";\n        return \"\" + protocol + this.socketAddress + \"/ws\" + (this.isEvent ? \"/events\" : \"\");\n    };\n    RemmeWebSocket.prototype._getSocketQuery = function (subscribe) {\n        if (subscribe === void 0) { subscribe = true; }\n        var query = this.isEvent ? {\n            action: subscribe ? \"subscribe\" : \"unsubscribe\",\n            data: this.data,\n        } : {\n            type: \"request\",\n            action: subscribe ? \"subscribe\" : \"unsubscribe\",\n            entity: \"batch_state\",\n            id: Math.floor(Math.random() * 1000),\n            parameters: this.data,\n        };\n        return JSON.stringify(query);\n    };\n    return RemmeWebSocket;\n}());\nexports.RemmeWebSocket = RemmeWebSocket;\n\n},{\"./models\":8,\"websocket\":1}],5:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BatchStatusesDto = /** @class */ (function () {\n    function BatchStatusesDto(data) {\n        this.status = Statuses[data.status];\n        this.batchId = data.batch_id;\n    }\n    return BatchStatusesDto;\n}());\nexports.BatchStatusesDto = BatchStatusesDto;\nvar Statuses;\n(function (Statuses) {\n    Statuses[\"INVALID\"] = \"INVALID\";\n    Statuses[\"PENDING\"] = \"PENDING\";\n    Statuses[\"COMMITTED\"] = \"COMMITTED\";\n})(Statuses = exports.Statuses || (exports.Statuses = {}));\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ErrorFromEvent = /** @class */ (function (_super) {\n    __extends(ErrorFromEvent, _super);\n    function ErrorFromEvent(data) {\n        var _this = _super.call(this, data.info) || this;\n        _this.status = exports.StatusEvent[data.status];\n        return _this;\n    }\n    return ErrorFromEvent;\n}(Error));\nexports.ErrorFromEvent = ErrorFromEvent;\nexports.StatusEvent = {\n    10: \"SUBSCRIBED\",\n    11: \"UNSUBSCRIBED\",\n    100: \"MALFORMED_JSON\",\n    101: \"MISSING_ACTION\",\n    102: \"INVALID_ACTION\",\n    103: \"MISSING_ID\",\n    104: \"MISSING_PARAMETERS\",\n    105: \"INVALID_PARAMS\",\n    106: \"INVALID_ENTITY\",\n    107: \"MISSING_ENTITY\",\n    108: \"MESSAGE_ID_EXISTS\",\n    109: \"MISSING_TYPE\",\n    110: \"NO_VALIDATOR\",\n    111: \"MISSING_DATA\",\n    112: \"WRONG_EVENT_TYPE\",\n    113: \"ALREADY_SUBSCRIBED\",\n    114: \"EVENTS_NOT_PROVIDED\",\n    200: \"BATCH_RESPONSE\",\n};\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ErrorMessage = /** @class */ (function (_super) {\n    __extends(ErrorMessage, _super);\n    function ErrorMessage(data) {\n        var _this = _super.call(this, data.message) || this;\n        _this.extendedData = data.extended_data;\n        _this.transactionId = data.transaction_id;\n        return _this;\n    }\n    return ErrorMessage;\n}(Error));\nexports.ErrorMessage = ErrorMessage;\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BatchStateUpdateDto_1 = require(\"./BatchStateUpdateDto\");\nexports.BatchStatusesDto = BatchStateUpdateDto_1.BatchStatusesDto;\nexports.Statuses = BatchStateUpdateDto_1.Statuses;\nvar ErrorMessage_1 = require(\"./ErrorMessage\");\nexports.ErrorMessage = ErrorMessage_1.ErrorMessage;\nvar ErrorFromEvent_1 = require(\"./ErrorFromEvent\");\nexports.ErrorFromEvent = ErrorFromEvent_1.ErrorFromEvent;\n\n},{\"./BatchStateUpdateDto\":5,\"./ErrorFromEvent\":6,\"./ErrorMessage\":7}]},{},[4])(4)\n});\n\n","module.exports = require('../package.json').version;\n","module.exports={\n  \"_args\": [\n    [\n      \"websocket@1.0.26\",\n      \"/var/www/remme-client-js/packages/remme-base-transaction-response\"\n    ]\n  ],\n  \"_from\": \"websocket@1.0.26\",\n  \"_id\": \"websocket@1.0.26\",\n  \"_inBundle\": false,\n  \"_integrity\": \"sha512-fjcrYDPIQxpTnqFQ9JjxUQcdvR89MFAOjPBlF+vjOt49w/XW4fJknUoMz/mDIn2eK1AdslVojcaOxOqyZZV8rw==\",\n  \"_location\": \"/websocket\",\n  \"_phantomChildren\": {\n    \"ms\": \"2.0.0\"\n  },\n  \"_requested\": {\n    \"type\": \"version\",\n    \"registry\": true,\n    \"raw\": \"websocket@1.0.26\",\n    \"name\": \"websocket\",\n    \"escapedName\": \"websocket\",\n    \"rawSpec\": \"1.0.26\",\n    \"saveSpec\": null,\n    \"fetchSpec\": \"1.0.26\"\n  },\n  \"_requiredBy\": [\n    \"/\"\n  ],\n  \"_resolved\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.26.tgz\",\n  \"_spec\": \"1.0.26\",\n  \"_where\": \"/var/www/remme-client-js/packages/remme-base-transaction-response\",\n  \"author\": {\n    \"name\": \"Brian McKelvey\",\n    \"email\": \"brian@worlize.com\",\n    \"url\": \"https://www.worlize.com/\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"bugs\": {\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node/issues\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"contributors\": [\n    {\n      \"name\": \"Iñaki Baz Castillo\",\n      \"email\": \"ibc@aliax.net\",\n      \"url\": \"http://dev.sipdoc.net\"\n    }\n  ],\n  \"dependencies\": {\n    \"debug\": \"^2.2.0\",\n    \"nan\": \"^2.3.3\",\n    \"typedarray-to-buffer\": \"^3.1.2\",\n    \"yaeti\": \"^0.0.6\"\n  },\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"devDependencies\": {\n    \"buffer-equal\": \"^1.0.0\",\n    \"faucet\": \"^0.0.1\",\n    \"gulp\": \"git+https://github.com/gulpjs/gulp.git#4.0\",\n    \"gulp-jshint\": \"^2.0.4\",\n    \"jshint\": \"^2.0.0\",\n    \"jshint-stylish\": \"^2.2.1\",\n    \"tape\": \"^4.0.1\"\n  },\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"engines\": {\n    \"node\": \">=0.10.0\"\n  },\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"license\": \"Apache-2.0\",\n  \"main\": \"index\",\n  \"name\": \"websocket\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"scripts\": {\n    \"gulp\": \"gulp\",\n    \"install\": \"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\n    \"test\": \"faucet test/unit\"\n  },\n  \"version\": \"1.0.26\"\n}\n","import { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport { IRemmeWebSocket } from \"./interface\";\nimport {\n    BatchStateUpdateDto,\n    BatchStatusesDto,\n    BatchStatuses,\n    Statuses,\n    ErrorMessage,\n    ErrorFromEvent,\n} from \"./models\";\n\n/**\n * @hidden\n */\ndeclare global {\n    /**\n     * @hidden\n     */\n    interface Window {\n        WebSocket: any;\n    }\n}\n\n/**\n * @hidden\n */\nlet WS;\nif (typeof window !== \"undefined\" && window.WebSocket !== \"undefined\") {\n    WS = window.WebSocket;\n} else {\n    WS = W3CWebSocket;\n}\n\nclass RemmeWebSocket implements IRemmeWebSocket {\n    // index signature\n    [key: string]: any;\n\n    public socketAddress: string;\n    public sslMode: boolean;\n    public isEvent: boolean = false;\n    public data: object;\n    private _socket: W3CWebSocket;\n\n    public constructor(socketAddress: string, sslMode: boolean) {\n        this.socketAddress = socketAddress;\n        this.sslMode = sslMode;\n    }\n\n    public connectToWebSocket(callback: any): void {\n        if (this._socket) {\n            this.closeWebSocket();\n        }\n        this._socket = new WS(this._getSubscribeUrl());\n        this._socket.onopen = () => {\n            this._socket.send(this._getSocketQuery());\n        };\n        this._socket.onmessage = (e) => {\n            // console.log(e.data);\n            const response: BatchStateUpdateDto = JSON.parse(e.data);\n            if (\n                response.type === \"message\"\n                &&\n                Object.getOwnPropertyNames(response.data).length !== 0\n            ) {\n                if (response.data.batch_statuses &&\n                    response.data.batch_statuses.invalid_transactions &&\n                    response.data.batch_statuses.invalid_transactions.length) {\n                    this._sendAnError(new ErrorMessage(response.data.batch_statuses.invalid_transactions[0]), callback);\n                    return;\n                }\n                callback(null, this.isEvent ? response.data : new BatchStatusesDto(response.data.batch_statuses));\n            } else if (response.type === \"error\") {\n                this._sendAnError(new ErrorFromEvent(response.data), callback);\n                return;\n            }\n        };\n        this._socket.onerror = (err) => {\n            callback(err);\n            return;\n        };\n    }\n\n    public closeWebSocket(): void {\n        if (!this._socket) {\n            throw new Error(\"WebSocket is not running\");\n        }\n        if (this._socket.readyState === 1) {\n            this._socket.send(this._getSocketQuery(false));\n        }\n        this._socket.close();\n        this._socket = null;\n    }\n\n    private _sendAnError(error: ErrorMessage | ErrorFromEvent, callback: any) {\n        this.closeWebSocket();\n        callback(error);\n    }\n\n    private _getSubscribeUrl(): string {\n        const protocol = this.sslMode ? \"wss://\" : \"ws://\";\n        return `${protocol}${this.socketAddress}/ws${this.isEvent ? \"/events\" : \"\"}`;\n    }\n\n    private _getSocketQuery(subscribe: boolean = true): string {\n        const query = this.isEvent ? {\n            action: subscribe ? \"subscribe\" : \"unsubscribe\",\n            data: this.data,\n        } : {\n            type: \"request\",\n            action: subscribe ? \"subscribe\" : \"unsubscribe\",\n            entity: \"batch_state\",\n            id: Math.floor(Math.random() * 1000),\n            parameters: this.data,\n        };\n        return JSON.stringify(query);\n    }\n}\n\nexport {\n    RemmeWebSocket,\n    IRemmeWebSocket,\n    BatchStatuses,\n    Statuses,\n};\n","export interface BatchStateUpdateDto {\n    id: string;\n    type: string;\n    data: Data;\n}\n\nexport interface Data {\n    batch_statuses: BatchStatuses;\n}\n\nexport class BatchStatusesDto {\n    public status: Statuses;\n    public batchId: string;\n\n    constructor(data: BatchStatuses) {\n        this.status = Statuses[data.status];\n        this.batchId = data.batch_id;\n    }\n}\n\nexport interface BatchStatuses {\n    status: string;\n    batch_id: string;\n    invalid_transactions?: InvalidTransactions[];\n}\n\nexport interface InvalidTransactions {\n    transaction_id: string;\n    message: string;\n    extended_data: string;\n}\n\nexport enum Statuses {\n    INVALID = \"INVALID\",\n    PENDING = \"PENDING\",\n    COMMITTED = \"COMMITTED\",\n}\n","export class ErrorFromEvent extends Error {\n    public status: string;\n\n    constructor(data: any) {\n        super(data.info);\n        this.status = StatusEvent[data.status];\n    }\n}\n\nexport const StatusEvent = {\n    10: \"SUBSCRIBED\",\n    11: \"UNSUBSCRIBED\",\n    100: \"MALFORMED_JSON\",\n    101: \"MISSING_ACTION\",\n    102: \"INVALID_ACTION\",\n    103: \"MISSING_ID\",\n    104: \"MISSING_PARAMETERS\",\n    105: \"INVALID_PARAMS\",\n    106: \"INVALID_ENTITY\",\n    107: \"MISSING_ENTITY\",\n    108: \"MESSAGE_ID_EXISTS\",\n    109: \"MISSING_TYPE\",\n    110: \"NO_VALIDATOR\",\n    111: \"MISSING_DATA\",\n    112: \"WRONG_EVENT_TYPE\",\n    113: \"ALREADY_SUBSCRIBED\",\n    114: \"EVENTS_NOT_PROVIDED\",\n    200: \"BATCH_RESPONSE\",\n};\n","import { InvalidTransactions } from \"./BatchStateUpdateDto\";\n\nexport class ErrorMessage extends Error {\n    public extendedData: string;\n    public transactionId: string;\n\n    constructor(data: InvalidTransactions) {\n        super(data.message);\n        this.extendedData = data.extended_data;\n        this.transactionId = data.transaction_id;\n    }\n}\n","export { BatchStateUpdateDto, BatchStatusesDto, Statuses, BatchStatuses } from \"./BatchStateUpdateDto\";\nexport { ErrorMessage } from \"./ErrorMessage\";\nexport { ErrorFromEvent } from \"./ErrorFromEvent\";\n"]}